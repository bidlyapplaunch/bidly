# Theme Extension Deployment Guide for Multiple Apps

## Problem
When you create a new Shopify app, the theme app extension needs to be deployed separately to that app. Each app gets its own extension instance with a unique UID.

## Solution

### Option 1: Deploy Extension to Second App (Recommended)

1. **Remove or comment out the UID** in `extensions/theme-app-extension/shopify.extension.toml`:
   ```toml
   # UID is auto-generated by Shopify when deployed to each app
   # Remove this line if deploying to a new app to let Shopify generate a new UID
   # uid = "a2274091-89f7-01b4-1067-13d60045030b40d0fae7"
   ```

2. **Authenticate with Shopify CLI** (if needed):
   ```bash
   shopify auth login
   ```

3. **Deploy the extension to the second app**:
   ```bash
   shopify app deploy --config shopify.app.second.toml --force
   ```

4. **After deployment, Shopify will assign a new UID**. The CLI will update the `shopify.extension.toml` file with the new UID for the second app.

5. **For the first app**, you can restore the original UID or redeploy:
   ```bash
   shopify app deploy --config shopify.app.bidly.toml --force
   ```

### Option 2: Keep Separate Extension Configs (Advanced)

If you want to maintain separate extension configs for each app:

1. Create a copy of the extension directory:
   ```bash
   cp -r extensions/theme-app-extension extensions/theme-app-extension-second
   ```

2. Remove the UID from the second extension's config

3. Update your deployment scripts to deploy the correct extension for each app

## Important Notes

- **Each app needs its own extension deployment** - The extension is not shared between apps
- **UID is app-specific** - Each app gets a unique UID when the extension is deployed
- **App Proxy must be configured** - Make sure the app proxy is set up in Shopify Partners for each app
- **Extension assets are shared** - The same code files work for both apps, but they need to be deployed separately

## Verification

After deployment, check in Shopify Partners:

1. Go to your app in Shopify Partners
2. Navigate to **Extensions** â†’ **Theme app extensions**
3. You should see the extension listed with a UID

For the second app (`6sb15z-k1.myshopify.com`):
- App: `bidly-app-second` (Client ID: `de32970476f2ecf20d98f9d9b6994c89`)
- Extension should appear after deployment

## Troubleshooting

### "You are not a member of the requested organization"
- Make sure you're logged into the correct Shopify Partners account
- Run `shopify auth login` to switch accounts
- Verify you have access to both apps in Shopify Partners

### Extension not appearing in Theme Editor
- Make sure the extension is deployed successfully
- Check that the app is installed on the store
- Verify the extension is enabled in the app settings

### Widget not loading on storefront
- Check that the app proxy is configured correctly
- Verify the backend URL in `backendConfig.js` matches the store
- Check browser console for errors

